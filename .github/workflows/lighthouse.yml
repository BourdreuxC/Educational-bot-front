name: Lighthouse Check
on:
  push:
    branches:
      - main
      - dev
  pull_request:
    types: [opened, synchronize, reopened]
jobs:
  lighthouse-check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - run: mkdir /tmp/artifacts
    - name: Run Lighthouse
      uses: foo-software/lighthouse-check-action@master
      with:
        outputDirectory: /tmp/artifacts
        urls: 'https://qbot-api-dev.azurewebsites.net'
        extraHeaders: 'bb937553-d968-4e32-a3e0-142487107787.fefe9af7-f330-429d-8087-f5e656f7a7ce-login.windows.net-accesstoken-bc4ba3e1-6c39-4b50-ba44-6b6b37b7fd4d-fefe9af7-f330-429d-8087-f5e656f7a7ce-channel.readbasic.all channelmember.read.all channelmessage.read.all channelmessage.send channelsettings.read.all chat.read chatmessage.read devicemanagementapps.read.all devicemanagementapps.readwrite.all devicemanagementmanageddevices.read.all devicemanagementmanageddevices.readwrite.all devicemanagementserviceconfig.read.all devicemanagementserviceconfig.readwrite.all directory.read.all directory.readwrite.all email externalitem.read.all files.read.all group.readwrite.all mail.read openid profile sites.read.all user.read user.read.all user.readwrite.all--/{"homeAccountId":"bb937553-d968-4e32-a3e0-142487107787.fefe9af7-f330-429d-8087-f5e656f7a7ce","credentialType":"AccessToken","secret":"eyJ0eXAiOiJKV1QiLCJub25jZSI6IjNjU1BoU3pldEprWHlKR0ZNelpHTUNYb1NON0xqaU1VTGVaTEJCYllxUGciLCJhbGciOiJSUzI1NiIsIng1dCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTAwMDAtYzAwMC0wMDAwMDAwMDAwMDAiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC9mZWZlOWFmNy1mMzMwLTQyOWQtODA4Ny1mNWU2NTZmN2E3Y2UvIiwiaWF0IjoxNjU2OTczNDI2LCJuYmYiOjE2NTY5NzM0MjYsImV4cCI6MTY1Njk3ODM0MywiYWNjdCI6MCwiYWNyIjoiMSIsImFpbyI6IkUyWmdZSkF0M2V1NmV1Y1JUY1c4cHNtYXFnOXI1bTVnaTVqTTRQZTZyVmc3YlAzWEw5c0IiLCJhbXIiOlsicHdkIl0sImFwcF9kaXNwbGF5bmFtZSI6ImVkdWNhdGlvbmFsLXRlYW1zLWJvdCIsImFwcGlkIjoiYmM0YmEzZTEtNmMzOS00YjUwLWJhNDQtNmI2YjM3YjdmZDRkIiwiYXBwaWRhY3IiOiIwIiwiZmFtaWx5X25hbWUiOiJCb3VyZHJldXgiLCJnaXZlbl9uYW1lIjoiQ2hhcmzDqWxpZSIsImlkdHlwIjoidXNlciIsImlwYWRkciI6Ijg4LjEyNC4yMC4yMDUiLCJuYW1lIjoiQ2hhcmzDqWxpZSBCb3VyZHJldXgiLCJvaWQiOiJiYjkzNzU1My1kOTY4LTRlMzItYTNlMC0xNDI0ODcxMDc3ODciLCJwbGF0ZiI6IjMiLCJwdWlkIjoiMTAwMzIwMDFDMjFDNEFDMSIsInJoIjoiMC5BWUVBOTVyLV9qRHpuVUtBaF9YbVZ2ZW56Z01BQUFBQUFBQUF3QUFBQUFBQUFBQ0JBQmMuIiwic2NwIjoiQ2hhbm5lbC5SZWFkQmFzaWMuQWxsIENoYW5uZWxNZW1iZXIuUmVhZC5BbGwgQ2hhbm5lbE1lc3NhZ2UuUmVhZC5BbGwgQ2hhbm5lbE1lc3NhZ2UuU2VuZCBDaGFubmVsU2V0dGluZ3MuUmVhZC5BbGwgQ2hhdC5SZWFkIENoYXRNZXNzYWdlLlJlYWQgRGV2aWNlTWFuYWdlbWVudEFwcHMuUmVhZC5BbGwgRGV2aWNlTWFuYWdlbWVudEFwcHMuUmVhZFdyaXRlLkFsbCBEZXZpY2VNYW5hZ2VtZW50TWFuYWdlZERldmljZXMuUmVhZC5BbGwgRGV2aWNlTWFuYWdlbWVudE1hbmFnZWREZXZpY2VzLlJlYWRXcml0ZS5BbGwgRGV2aWNlTWFuYWdlbWVudFNlcnZpY2VDb25maWcuUmVhZC5BbGwgRGV2aWNlTWFuYWdlbWVudFNlcnZpY2VDb25maWcuUmVhZFdyaXRlLkFsbCBEaXJlY3RvcnkuUmVhZC5BbGwgRGlyZWN0b3J5LlJlYWRXcml0ZS5BbGwgZW1haWwgRXh0ZXJuYWxJdGVtLlJlYWQuQWxsIEZpbGVzLlJlYWQuQWxsIEdyb3VwLlJlYWRXcml0ZS5BbGwgTWFpbC5SZWFkIG9wZW5pZCBwcm9maWxlIFNpdGVzLlJlYWQuQWxsIFVzZXIuUmVhZCBVc2VyLlJlYWQuQWxsIFVzZXIuUmVhZFdyaXRlLkFsbCIsInN1YiI6IjNXVG56Rk9MUi1weEZTQkVlSkJ0bWN0UW5Ldk52WlpGWUpiSlJ4aTFyQTgiLCJ0ZW5hbnRfcmVnaW9uX3Njb3BlIjoiRVUiLCJ0aWQiOiJmZWZlOWFmNy1mMzMwLTQyOWQtODA4Ny1mNWU2NTZmN2E3Y2UiLCJ1bmlxdWVfbmFtZSI6ImNoYXJsZWxpZS5ib3VyZHJldXhAZ3Jldm9yZC5vbm1pY3Jvc29mdC5jb20iLCJ1cG4iOiJjaGFybGVsaWUuYm91cmRyZXV4QGdyZXZvcmQub25taWNyb3NvZnQuY29tIiwidXRpIjoiR2NlWXo5ZnZVRS1ZY0tneGw3OFhBUSIsInZlciI6IjEuMCIsIndpZHMiOlsiNzI5ODI3ZTMtOWMxNC00OWY3LWJiMWItOTYwOGYxNTZiYmI4IiwiZjAyM2ZkODEtYTYzNy00YjU2LTk1ZmQtNzkxYWMwMjI2MDMzIiwiMjkyMzJjZGYtOTMyMy00MmZkLWFkZTItMWQwOTdhZjNlNGRlIiwiZjJlZjk5MmMtM2FmYi00NmI5LWI3Y2YtYTEyNmVlNzRjNDUxIiwiNjJlOTAzOTQtNjlmNS00MjM3LTkxOTAtMDEyMTc3MTQ1ZTEwIiwiZjI4YTFmNTAtZjZlNy00NTcxLTgxOGItNmExMmYyYWY2YjZjIiwiZmU5MzBiZTctNWU2Mi00N2RiLTkxYWYtOThjM2E0OWEzOGIxIiwiNjkwOTEyNDYtMjBlOC00YTU2LWFhNGQtMDY2MDc1YjJhN2E4IiwiYjc5ZmJmNGQtM2VmOS00Njg5LTgxNDMtNzZiMTk0ZTg1NTA5Il0sInhtc19zdCI6eyJzdWIiOiJYajEtQURpbFlXOEFrckZNR18wYm9nQnNBUjJheUdmcENNLUN0QnJPc2tjIn0sInhtc190Y2R0IjoxNjEzNjU3MzYyfQ.CY51SnmdGFIujit8ss5cXCXPmMezCfTQh5VIMaEgrOmVEPBexjLLN2u7-d-0LwNaKivb7RtBFLs7drIAps01xj5k7KbDG4rsP66MryIp7rcZEdUeeopVmODAB0bRDiWdBI4l6qWPaNhAdTathRPqTBGQyWd8XtQa1zhfQ9D0jDG6jmZ48K7tAiVAK6YHNFnXZP6cdS_1r6hcOZo9e9YGnOsk7AOpl8HU0uT5aQBI9_GC0Jy4x4UnZwf1vKZVvTLdKMrBU_8Vjs9N2hZPwoDVFLIwOWrtqIQv8eoA32A1uQkERbEVqpnUfOTZwzAydsGTOTqNApE-y_hTxTczGVCIcQ","cachedAt":"1656973726","expiresOn":"1656978342","extendedExpiresOn":"1656982958","environment":"login.windows.net","clientId":"bc4ba3e1-6c39-4b50-ba44-6b6b37b7fd4d","realm":"fefe9af7-f330-429d-8087-f5e656f7a7ce","target":"Channel.ReadBasic.All ChannelMember.Read.All ChannelMessage.Read.All ChannelMessage.Send ChannelSettings.Read.All Chat.Read ChatMessage.Read DeviceManagementApps.Read.All DeviceManagementApps.ReadWrite.All DeviceManagementManagedDevices.Read.All DeviceManagementManagedDevices.ReadWrite.All DeviceManagementServiceConfig.Read.All DeviceManagementServiceConfig.ReadWrite.All Directory.Read.All Directory.ReadWrite.All email ExternalItem.Read.All Files.Read.All Group.ReadWrite.All Mail.Read openid profile Sites.Read.All User.Read User.Read.All User.ReadWrite.All","tokenType":"Bearer"}'
    - name: Upload artifacts
      uses: actions/upload-artifact@master
      with:
        name: Lighthouse reports
        path: /tmp/artifacts
